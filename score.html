<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Highscore</title>
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
    <link href="dist/application.css" rel="stylesheet">
</head>
<body class="page-highscore">
    <div class="leaderboard">
        <h1>Scoreboard</h1>
        <div class="score-board">
            <div id="js-insert-scores"></div>
        </div>
    </div>
    <script src="dist/dependencies.js" charset="utf-8"></script>
    <script src="./dist/application.js" charset="utf-8"></script>
    <script type="text/javascript">
        function getScore() {
            var score = Store.get('score');
            var index = 1;
            var list = [];
            score.forEach(function(item) {
                list.push('<div class="score-item"><span class="rank">#' + index++ + '</span><strong>' + item.value + '</strong><span>' + item.name + '</span></div>');
            });
            return list;
        }

        function update() {
            requestAnimationFrame(update);
            function compare(a, b) {
                if (a.value < b.value) {
                    return -1;
                } else if (a.value > b.value) {
                    return 1;
                } else {
                    return 0;
                }
            }
            var list = getScore().sort(compare);
            document.getElementById('js-insert-scores').innerHTML = list.join('\n');
        }
        update();
    </script>
</body>
</html>
